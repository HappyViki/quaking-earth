(this["webpackJsonpquaking-earth"]=this["webpackJsonpquaking-earth"]||[]).push([[0],{124:function(t,e,a){t.exports=a(139)},130:function(t,e,a){},138:function(t,e,a){},139:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),c=(a(129),a(130),a(179)),u=a(178),l=a(18),s=a(172),m=a(181),d=a(176);function g(t){return{id:"simple-tab-".concat(t),"aria-controls":"simple-tabpanel-".concat(t)}}var f=Object(l.b)((function(t){return t.data.length?{currentTab:t.currentIndex,tabs:t.data.map((function(t){return t.settings.name}))}:{}}),(function(t,e){return{onAddTab:function(){return t(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"ADD_VIEW",payload:{name:t.name?t.name:"Default",settings:t.settings?t.settings:{name:"",location:"",startTime:"",endTime:"",magMin:"",magMax:""},features:t.features?t.features:{}}}}())},onDisplayTab:function(e){return t(function(t){return{type:"CURRENT_VIEW",index:t}}(e))}}}))((function(t){var e=t.currentTab,a=t.tabs,n=t.onDisplayTab,i=t.onAddTab;return console.log("Tabs:",a),r.a.createElement(s.a,{position:"static"},r.a.createElement(m.a,{value:e,"aria-label":"simple tabs example"},a&&a.map((function(t,e){return r.a.createElement(d.a,Object.assign({key:e,label:t,onClick:function(){return n(e)}},g(t)))})),r.a.createElement(d.a,Object.assign({style:{background:"#40a9ff"},label:"+"},g("add-tab"),{onClick:i}))))})),p=a(88),h=a(89),E=a(93),v=a(92),b=a(20),y=function(t){Object(E.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).visualize=function(){var e=t.props.features;if(e){console.log("Display:",e);var a=b.d("body").append("div").attr("class","tooltip"),n=b.c(b.b).domain([0,6]),r=b.d("svg"),i=b.d("svg").select("g");i&&i.remove(),r.append("g").selectAll("circle.ripple").data(e).enter().append("circle").attr("class","ripple").attr("cx",0).attr("cy",245).attr("r",(function(t,a){return 20*(1+a+(a>0?Math.floor((t.time-e[a-1].time)/1e3/60):0))})).attr("fill","none").attr("stroke",(function(t){return n(Math.round(t.mag))})).attr("stroke-width",10).on("mousemove",(function(t,e,n){a.style("opacity","1").style("left",b.a.pageX+"px").style("top",b.a.pageY+"px").html("".concat(new Date(t.time).toUTCString(),"<br/>").concat(t.title))})).on("mouseout",(function(){a.style("opacity","0")}))}},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.visualize()}},{key:"componentDidUpdate",value:function(){this.visualize()}},{key:"render",value:function(){return r.a.createElement("svg",{width:"100%",height:"100%"})}}]),a}(r.a.Component),M=Object(l.b)((function(t){return{features:t.data.length?t.data[t.currentIndex].features:{}}}))(y),k=a(94),N=a(140),T=a(180),U=a(90),I=a.n(U),x=a(177),S=Object(x.a)((function(t){return{root:{margin:t.spacing(2),padding:t.spacing(2)},field:{"margin-bottom":t.spacing(2)}}})),D=Object(l.b)((function(t){if(!t.data.length)return{};var e=t.data[t.currentIndex].settings;return console.log("Settings:",t.currentIndex,e),{index:t.currentIndex,settings:e}}),(function(t){return{onUpdateSettings:function(e,a){return t(function(t,e){return{type:"UPDATE_VIEW_SETTINGS",index:t,payload:e}}(e,a))},onUpdateData:function(e,a){return console.log("Settings Dispatch:",a),t(function(t,e){e.name;var a=e.location,n=e.startTime,r=e.endTime,i=e.magMin,o=e.magMax;return function(e){e({type:"START_FETCHING"}),fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson").then((function(t){return t.json()})).then((function(c){var u=c.features.filter((function(t){var e=t.properties,c=!a||e.place.includes(a),u=!n||e.time>=Date.parse(n),l=!r||e.time<=Date.parse(r),s=!i||e.mag>=i,m=!o||e.mag<=o;return c&&u&&l&&s&&m})).map((function(t){return{id:t.properties.id,title:t.properties.title,time:t.properties.time,mag:t.properties.mag,coordinates:t.properties.coordinates}})).reverse();console.log("Fetched:",u),e({type:"STOP_FETCHING"}),e(function(t,e){return{type:"UPDATE_VIEW_FEATURES",index:t,payload:e}}(t,u))}))}}(e,a))}}}))((function(t){var e=t.onUpdateSettings,a=t.onUpdateData,n=t.index,i=t.settings,o=function(t){console.log(t.target.id);var a=Object(k.a)({},i);a[t.target.id]=t.target.value,e(n,a)};console.log("Inside Settings:",i);var c=S(),l=i?Object.keys(i):null;return r.a.createElement(N.a,{className:c.root},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var e=Object.values(t.target).slice(0,5).reduce((function(t,e){return t[e.id]=e.value,t}),{});console.log("handleSubmit",e),a(n,e)}},r.a.createElement("h2",null,"Earthquake Settings"),l&&l.map((function(t){return r.a.createElement(T.a,{key:t,id:t,className:c.field,label:t,value:i[t],onChange:o})})),r.a.createElement(u.a,{variant:"contained",type:"submit",startIcon:r.a.createElement(I.a,null)},"Update")))})),O={currentIndex:0,fetching:!1,data:[{settings:{name:"quake1",location:"Magna, Utah",startTime:"2020-03-18",endTime:"2020-03-24",magMin:"3.5",magMax:"5.7"},features:[{id:"uu60364832",title:"M 5.7 - 6km NNE of Magna, Utah",time:1584536971530,mag:5.7,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 4km NNE of Magna, Utah",time:1584537008210,mag:3.94,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.0 - 4km NNE of Magna, Utah",time:1584537016960,mag:4.01,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.2 - 1km NNW of Magna, Utah",time:1584537059440,mag:4.17,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 5km NNE of Magna, Utah",time:1584537072120,mag:3.74,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 7km NNE of Magna, Utah",time:1584537261540,mag:3.69,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 2km NNE of Magna, Utah",time:1584537311480,mag:3.67,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 6km NE of Magna, Utah",time:1584537722060,mag:3.67,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 4km N of Magna, Utah",time:1584537799860,mag:3.66,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 6km NE of Magna, Utah",time:1584538349850,mag:3.86,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.5 - 3km NNE of Magna, Utah",time:1584538598070,mag:3.5,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.6 - 7km NNE of Magna, Utah",time:1584540132830,mag:4.59,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.6 - 5km NNE of Magna, Utah",time:1584543461430,mag:3.56,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.6 - 5km NE of Magna, Utah",time:1584558743610,mag:4.57,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 8km NNE of Magna, Utah",time:1584926235310,mag:3.94,coordinates:[-112.059,40.751,10.65]}]}]},j=a(24),_=a(91),w=a(49),A=Object(j.c)({currentIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CURRENT_VIEW":return e.index;default:return t}},data:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,a=Object(w.a)(t);switch(e.type){case"ADD_VIEW":return[].concat(Object(w.a)(t),[e.payload]);case"UPDATE_VIEW":return a[e.index]=e.payload,a;case"UPDATE_VIEW_SETTINGS":return a[e.index].settings=e.payload,a;case"UPDATE_VIEW_FEATURES":return a[e.index].features=e.payload,a;default:return t}},fetching:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"START_FETCHING":return!0;case"STOP_FETCHING":return!1;default:return t}}}),C=(a(138),Object(j.d)(A,function(){var t=localStorage.getItem("quaking-earth-state");return t?JSON.parse(t):O}(),Object(j.a)(_.a))),W=function(){var t=JSON.stringify(C.getState());localStorage.setItem("quaking-earth-state",t)};console.log("Init state:",C.getState());var V=function(){return r.a.createElement(l.a,{store:C},r.a.createElement(c.a,{container:!0},r.a.createElement(c.a,{item:!0,xs:12},r.a.createElement(f,null)),r.a.createElement(c.a,{item:!0,xs:9},r.a.createElement(M,null)),r.a.createElement(c.a,{item:!0,xs:3},r.a.createElement(D,null))),r.a.createElement(u.a,{onClick:W},"saveStateLocally"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[124,1,2]]]);
//# sourceMappingURL=main.7926cb6e.chunk.js.map