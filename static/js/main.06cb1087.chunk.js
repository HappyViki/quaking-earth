(this["webpackJsonpquaking-earth"]=this["webpackJsonpquaking-earth"]||[]).push([[0],{123:function(e,t,a){e.exports=a(139)},129:function(e,t,a){},135:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),c=(a(128),a(129),a(180)),u=a(179),l=a(18),s=a(173),m=a(182),d=a(177);function g(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var p=Object(l.b)((function(e){return e.data.length?{currentTab:e.currentIndex,tabs:e.data.map((function(e){return e.settings.name}))}:{}}),(function(e,t){return{onAddTab:function(){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"ADD_VIEW",payload:{name:e.name?e.name:"Default",settings:e.settings?e.settings:{name:"",location:"",startTime:"",endTime:"",magMin:"",magMax:""},features:e.features?e.features:{}}}}())},onDisplayTab:function(t){return e(function(e){return{type:"CURRENT_VIEW",index:e}}(t))},onRemoveTab:function(t,a){return e(function(e){return{type:"REMOVE_VIEW",index:e,payload:e?e-1:0}}(t))}}}))((function(e){var t=e.currentTab,a=e.tabs,n=e.onDisplayTab,i=e.onAddTab,o=e.onRemoveTab;return r.a.createElement(s.a,{position:"static"},r.a.createElement(m.a,{value:t,"aria-label":"simple tabs example"},a&&a.map((function(e,t){return r.a.createElement(d.a,Object.assign({key:t,label:e||"New Panel",onClick:function(){return n(t)}},g(e)))})),r.a.createElement(d.a,Object.assign({style:{background:"green"},label:"+"},g("add-tab"),{onClick:i})),a.length-1&&r.a.createElement(d.a,Object.assign({style:{background:"red"},label:"-"},g("remove-tab"),{onClick:function(){return o(t)}}))))})),f=a(88),E=a(89),h=a(93),v=a(92),b=a(20),y=(a(135),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).visualize=function(){var t=e.props.features,a=b.d("svg").select("g");if(a&&a.remove(),t.length>0){var n=t.slice(0,100);console.log("Display:",t);var r=b.d("body").append("div").attr("class","tooltip"),i=b.c(b.b).domain([0,6]),o=b.d("svg");o.append("g").selectAll("circle.ripple").data(n).enter().append("circle").attr("class","ripple").attr("cx",0).attr("cy",245).attr("r",(function(e,t,a){var n=20*(1+t);return t===a.length-1&&o.attr("width",n+10),n})).attr("fill","none").attr("stroke",(function(e){return i(Math.round(e.mag))})).attr("stroke-width",10).on("mousemove",(function(e,t,a){r.style("opacity","1").style("left",b.a.pageX+"px").style("top",b.a.pageY+"px").html("".concat(new Date(e.time).toUTCString(),"<br/>").concat(e.title))})).on("mouseout",(function(){r.style("opacity","0")}))}},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){this.visualize()}},{key:"componentDidUpdate",value:function(){this.visualize()}},{key:"render",value:function(){return r.a.createElement("div",{className:"svg-container"},r.a.createElement("svg",{className:"svg"}))}}]),a}(r.a.Component)),M=Object(l.b)((function(e){return{features:e.data.length?e.data[e.currentIndex].features:{}}}))(y),k=a(94),N=a(140),T=a(181),x=a(90),U=a.n(x),I=a(178),D=Object(I.a)((function(e){return{root:{margin:e.spacing(2),padding:e.spacing(2)},field:{"margin-bottom":e.spacing(2),display:"block"},note:{color:"red","font-style":"italic"}}})),O=Object(l.b)((function(e){if(!e.data.length)return{};var t=e.data[e.currentIndex].settings;return{index:e.currentIndex,settings:t}}),(function(e){return{onUpdateSettings:function(t,a){return e(function(e,t){return{type:"UPDATE_VIEW_SETTINGS",index:e,payload:t}}(t,a))},onUpdateData:function(t,a){return e(function(e,t){t.name;var a=t.location,n=t.startTime,r=t.endTime,i=t.magMin,o=t.magMax;return function(t){t({type:"START_FETCHING"}),fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson").then((function(e){return e.json()})).then((function(c){var u=c.features.filter((function(e){var t=e.properties,c=!a||t.place.includes(a),u=!n||t.time>=Date.parse(n),l=!r||t.time<=Date.parse(r),s=!i||t.mag>=i,m=!o||t.mag<=o;return c&&u&&l&&s&&m})).map((function(e){return{id:e.properties.id,title:e.properties.title,time:e.properties.time,mag:e.properties.mag,coordinates:e.properties.coordinates}})).reverse();t({type:"STOP_FETCHING"}),t(function(e,t){return{type:"UPDATE_VIEW_FEATURES",index:e,payload:t}}(e,u))}))}}(t,a))}}}))((function(e){var t=e.onUpdateSettings,a=e.onUpdateData,n=(e.onRemoveData,e.index),i=e.settings,o=function(e){var a=Object(k.a)({},i);a[e.target.id]=e.target.value,t(n,a)},c=D(),l=i?Object.keys(i):null,s={name:{label:"Name",type:"text"},location:{label:"Location",type:"text"},startTime:{label:"Start Date",type:"date"},endTime:{label:"End Date",type:"date"},magMin:{label:"Minimum Magnitude",type:"text"},magMax:{label:"Maximum Magnitude",type:"text"}};return r.a.createElement(N.a,{className:c.root},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(e.target);var t=Object.values(e.target).slice(0,6).reduce((function(e,t){return e[t.id]=t.value,e}),{});a(n,t)}},r.a.createElement("h2",null,"Earthquake Settings"),l&&l.map((function(e){return r.a.createElement(T.a,{key:e,id:e,className:c.field,label:s[e].label,type:s[e].type,InputLabelProps:{shrink:"date"===s[e].type||Boolean(i[e])},value:i[e],onChange:o})})),r.a.createElement(u.a,{variant:"contained",type:"submit",startIcon:r.a.createElement(U.a,null)},"Update"),r.a.createElement("p",{className:c.note},"Displays maximum 100 datapoints from up to one month of data")))})),S={currentIndex:0,fetching:!1,data:[{settings:{name:"quake1",location:"Magna, Utah",startTime:"2020-03-18",endTime:"2020-03-24",magMin:"3.5",magMax:"5.7"},features:[{id:"uu60364832",title:"M 5.7 - 6km NNE of Magna, Utah",time:1584536971530,mag:5.7,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 4km NNE of Magna, Utah",time:1584537008210,mag:3.94,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.0 - 4km NNE of Magna, Utah",time:1584537016960,mag:4.01,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.2 - 1km NNW of Magna, Utah",time:1584537059440,mag:4.17,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 5km NNE of Magna, Utah",time:1584537072120,mag:3.74,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 7km NNE of Magna, Utah",time:1584537261540,mag:3.69,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 2km NNE of Magna, Utah",time:1584537311480,mag:3.67,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 6km NE of Magna, Utah",time:1584537722060,mag:3.67,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 4km N of Magna, Utah",time:1584537799860,mag:3.66,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 6km NE of Magna, Utah",time:1584538349850,mag:3.86,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.5 - 3km NNE of Magna, Utah",time:1584538598070,mag:3.5,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.6 - 7km NNE of Magna, Utah",time:1584540132830,mag:4.59,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.6 - 5km NNE of Magna, Utah",time:1584543461430,mag:3.56,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.6 - 5km NE of Magna, Utah",time:1584558743610,mag:4.57,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 8km NNE of Magna, Utah",time:1584926235310,mag:3.94,coordinates:[-112.059,40.751,10.65]}]}]},j=a(24),_=a(91),w=a(49),A=Object(j.c)({currentIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_VIEW":return t.index;case"REMOVE_VIEW":return t.payload;default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=Object(w.a)(e);switch(t.type){case"ADD_VIEW":return[].concat(Object(w.a)(e),[t.payload]);case"UPDATE_VIEW":return a[t.index]=t.payload,a;case"UPDATE_VIEW_SETTINGS":return a[t.index].settings=t.payload,a;case"UPDATE_VIEW_FEATURES":return a[t.index].features=t.payload,a;case"REMOVE_VIEW":return a.splice(t.index,1),a;default:return e}},fetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_FETCHING":return!0;case"STOP_FETCHING":return!1;default:return e}}}),C=(a(138),Object(j.d)(A,function(){var e=localStorage.getItem("quaking-earth-state");return e?JSON.parse(e):S}(),Object(j.a)(_.a))),V=function(){var e=JSON.stringify(C.getState());localStorage.setItem("quaking-earth-state",e)},W=function(){localStorage.removeItem("quaking-earth-state")};var R=function(){return r.a.createElement(l.a,{store:C},r.a.createElement(c.a,{container:!0},r.a.createElement(c.a,{item:!0,xs:12},r.a.createElement(p,null)),r.a.createElement(c.a,{item:!0,xs:9},r.a.createElement(M,null)),r.a.createElement(c.a,{item:!0,xs:3},r.a.createElement(O,null))),r.a.createElement(u.a,{onClick:V},"Save Current State"),r.a.createElement(u.a,{onClick:W},"Default State"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.06cb1087.chunk.js.map