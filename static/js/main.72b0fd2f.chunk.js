(this["webpackJsonpquaking-earth-2"]=this["webpackJsonpquaking-earth-2"]||[]).push([[0],{86:function(t,e,n){},93:function(t,e,n){},94:function(t,e,n){},95:function(t,e,n){},96:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n(0),r=n.n(i),c=n(11),o=n.n(c),u=(n(86),n(6)),l=n(2),s="ADD_PANEL",d="DELETE_PANEL",m="UPDATE_PANEL",f="CURRENT_PANEL",g="UPDATE_PANEL_SETTINGS",p="UPDATE_PANEL_FEATURES",h="START_FETCHING",b="STOP_FETCHING";n(93);function j(t){return{id:"simple-tab-".concat(t),"aria-controls":"simple-tabpanel-".concat(t)}}var v=Object(l.b)((function(t){return t.data.length?{currentPanel:t.currentPanel,tabs:t.data.map((function(t){return t.settings.name}))}:{}}),(function(t,e){return{addPanel:function(){return t(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:s,payload:{name:t.name?t.name:"Default",settings:t.settings?t.settings:{name:"new quake panel",location:"",startTime:"",endTime:"",magMin:"",magMax:""},features:t.features?t.features:{}}}}())},setCurrentPanel:function(e){return t(function(t){return{type:f,index:t}}(e))}}}))((function(t){var e=t.currentPanel,n=t.tabs,i=t.setCurrentPanel,r=t.addPanel;return Object(a.jsxs)("div",{value:e,"aria-label":"earthquake panel tabs",className:"navbar",children:[n&&n.map((function(t,n){return Object(a.jsx)("button",Object(u.a)(Object(u.a)({onClick:function(){return i(n)},className:e===n?"tab current":"tab"},j(t)),{},{children:t}),n)})),Object(a.jsx)("button",Object(u.a)(Object(u.a)({className:"add-tab"},j("add-tab")),{},{onClick:r,children:"+"}))]})})),x=n(52),y=n(53),O=n(56),N=n(55),M=n(3),k=(n(94),function(t){Object(O.a)(n,t);var e=Object(N.a)(n);function n(){var t;Object(x.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).visualize=function(){var e=t.props.features,n=M.d("svg").select("g");if(n&&n.remove(),e.length>0){var a=e.slice(0,100);console.log("Display:",e);var i=M.d(".tooltip"),r=M.c(M.b).domain([0,6]),c=M.d("svg");c.append("g").selectAll("circle.ripple").data(a).enter().append("circle").attr("class","ripple").attr("cy",245).attr("r",(function(t,e,n){var a=20*(1+e);return e===n.length-1&&c.attr("width",a+10),a})).attr("stroke",(function(t){return r(Math.round(t.mag))})).on("mousemove",(function(t,e,n){i.style("opacity","1").style("left",M.a.pageX+"px").style("top",M.a.pageY+"px").html("".concat(new Date(t.time).toUTCString(),"<br/>").concat(t.title))})).on("mouseout",(function(){i.style("opacity","0")}))}},t}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.visualize()}},{key:"componentDidUpdate",value:function(){this.visualize()}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"svg-container",children:Object(a.jsx)("svg",{className:"svg"})})}}]),n}(r.a.Component)),E=Object(l.b)((function(t){return{features:t.data.length?t.data[t.currentPanel].features:{}}}))(k),P=function(t,e){e.name;var n=e.location,a=e.startTime,i=e.endTime,r=e.magMin,c=e.magMax;return function(e){e({type:h}),fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson").then((function(t){return t.json()})).then((function(o){var u=o.features.filter((function(t){var e=t.properties,o=!n||e.place.includes(n),u=!a||e.time>=Date.parse(a),l=!i||e.time<=Date.parse(i),s=!r||e.mag>=r,d=!c||e.mag<=c;return o&&u&&l&&s&&d})).map((function(t){return{id:t.properties.id,title:t.properties.title,time:t.properties.time,mag:t.properties.mag,coordinates:t.properties.coordinates}})).reverse();e({type:b}),e(function(t,e){return{type:p,index:t,payload:e}}(t,u))}))}},D=(n(95),Object(l.b)((function(t){if(!t.data.length)return{};var e=t.data[t.currentPanel].settings;return{currentPanel:t.currentPanel,settings:e}}),(function(t){return{updatePanelSettings:function(e,n){return t(function(t,e){return{type:g,index:t,payload:e}}(e,n))},deletePanel:function(e){return t(function(t){return{type:d,index:t}}(e))},fetchData:function(e,n){return t(P(e,n))}}}))((function(t){var e=t.updatePanelSettings,n=t.deletePanel,i=t.fetchData,r=t.currentPanel,c=t.settings,o=function(t){var n=Object(u.a)({},c);n[t.target.id]=t.target.value,e(r,n)},l=c?Object.keys(c):null,s={name:{label:"Name",type:"text"},location:{label:"Location",type:"text"},startTime:{label:"Start Date",type:"date"},endTime:{label:"End Date",type:"date"},magMin:{label:"Minimum Magnitude",type:"text"},magMax:{label:"Maximum Magnitude",type:"text"}};return Object(a.jsx)("div",{className:"settings",children:l?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{onSubmit:function(t){t.preventDefault();var e=Object.values(t.target).slice(0,6).reduce((function(t,e){return t[e.id]=e.value,t}),{});i(r,e)},children:[Object(a.jsx)("h2",{children:"Earthquake Settings"}),l&&l.map((function(t){return Object(a.jsx)("input",{id:t,className:"field",label:s[t].label,type:s[t].type,value:c[t],onChange:o},t)})),Object(a.jsx)("button",{variant:"contained",type:"submit",children:"Update"}),Object(a.jsx)("p",{children:"Displays maximum 100 datapoints from up to one month of data"})]}),Object(a.jsx)("button",{onClick:function(){n(r)},children:"Delete Panel"})]}):Object(a.jsx)("p",{children:"Please add a panel by clicking the green button on the left of your screen."})})}))),T={currentPanel:0,fetching:!1,data:[{settings:{name:"quake1",location:"Magna, Utah",startTime:"2020-03-18",endTime:"2020-03-24",magMin:"3.5",magMax:"5.7"},features:[{id:"uu60364832",title:"M 5.7 - 6km NNE of Magna, Utah",time:1584536971530,mag:5.7,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 4km NNE of Magna, Utah",time:1584537008210,mag:3.94,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.0 - 4km NNE of Magna, Utah",time:1584537016960,mag:4.01,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.2 - 1km NNW of Magna, Utah",time:1584537059440,mag:4.17,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 5km NNE of Magna, Utah",time:1584537072120,mag:3.74,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 7km NNE of Magna, Utah",time:1584537261540,mag:3.69,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 2km NNE of Magna, Utah",time:1584537311480,mag:3.67,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 6km NE of Magna, Utah",time:1584537722060,mag:3.67,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.7 - 4km N of Magna, Utah",time:1584537799860,mag:3.66,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 6km NE of Magna, Utah",time:1584538349850,mag:3.86,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.5 - 3km NNE of Magna, Utah",time:1584538598070,mag:3.5,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.6 - 7km NNE of Magna, Utah",time:1584540132830,mag:4.59,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.6 - 5km NNE of Magna, Utah",time:1584543461430,mag:3.56,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 4.6 - 5km NE of Magna, Utah",time:1584558743610,mag:4.57,coordinates:[-112.059,40.751,10.65]},{id:"uu60364832",title:"M 3.9 - 8km NNE of Magna, Utah",time:1584926235310,mag:3.94,coordinates:[-112.059,40.751,10.65]}]}]},U=n(5),S=n(54),C=n(21),A=Object(U.c)({currentPanel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return e.index>1?e.index-1:0;case f:return e.index;default:return t}},data:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=Object(C.a)(t);switch(e.type){case s:return[].concat(Object(C.a)(t),[e.payload]);case d:return n.filter((function(t,n){return n!==e.index}));case m:return n[e.index]=e.payload,n;case g:return n[e.index].settings=e.payload,n;case p:return n[e.index].features=e.payload,n;default:return t}},fetching:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return!0;case b:return!1;default:return t}}}),q=(n(96),Object(U.d)(A,function(){var t=localStorage.getItem("quaking-earth-state");return t?JSON.parse(t):T}(),Object(U.a)(S.a))),w=function(){var t=JSON.stringify(q.getState());localStorage.setItem("quaking-earth-state",t)},_=function(){localStorage.removeItem("quaking-earth-state")};var L=function(){return Object(a.jsxs)(l.a,{store:q,children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Object(a.jsx)(v,{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:1},children:[Object(a.jsx)(E,{}),Object(a.jsx)(D,{})]}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("button",{onClick:w,children:"Save Current State"}),Object(a.jsx)("button",{onClick:_,children:"Default State"})]})]}),Object(a.jsx)("div",{className:"tooltip"})]})},F=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),r(t),c(t)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),F()}},[[97,1,2]]]);
//# sourceMappingURL=main.72b0fd2f.chunk.js.map